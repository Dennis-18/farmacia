<div class="container">
  <h1 class="text-center mt-3">TRAZABILIDAD DE PRODUCTOS</h1>

  <div class="row">
    <div class="col-auto">
      <label class="form-label" for="descripcion">Selecciona producto</label>
      <!-- <input type="text" class="form-control" id="nombre_producto" name="nombre_producto" placeholder="Nombre del producto" required> -->
      <select class="form-select" 
      aria-label="Default select example"  
      name="producto" 
      id="producto" 
      [(ngModel)]="productoBuscar.id_producto"
      (change)="buscarProducto($event);">
        <option *ngFor="let producto of productos" 
        [value]="producto.id_producto" >{{producto.descripcion}}</option>
      </select>
    </div>


    <div class="col-auto">
        <label class="form-label">Fecha Inicio</label>
        <input type="date" class="form-control" id="fecha_inicio" name="fecha_inicio"
         [(ngModel)]="productoBuscar.fecha_inicio" (change)="buscarProducto($event)">
    </div>

    <div class="col-auto">
      <label class="form-label">Fecha Fin</label>
      <input type="date" class="form-control" id="fecha_fin" name="fecha_fin"
      [(ngModel)]="productoBuscar.fecha_fin" (change)="buscarProducto($event)" >
  </div>

  <div class="row mt-4 mb-4"></div>
  <h2 class="text-center" *ngIf="!table">No hay resultados para la busqueda</h2>
  <table class="table table-hover" id="tb-historial" *ngIf="table">
    <thead>
      <tr>
        <th>PRODUCTO</th>
        <th>LOTE</th>
        <th>CANTIDAD</th>
        <th>FECHA DE REGISTRO</th>
        <th>TIPO DE MOVIMIENTO</th>
        <th>SERVICIO</th>
        <th>USUARIO</th>
        <!-- <td *ngFor="let columna of columnas">{{columna.descripcion}}</td> -->

      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let registro of registros">
        <td>{{registro.producto}}</td>
        <td>{{registro.lote}}</td>
        <td>{{registro.cantidad}}</td>
        <td>{{registro.fecha_registro | date: 'yyyy-MM-dd HH:MM'}}</td>
        <td>{{registro.tipo_movimiento}}</td>
        <td>{{registro.servicio}}</td>
        <td>{{registro.usuario}}</td>
      </tr>
    </tbody>
  </table>

  </div>
  <div class="d-flex justify-content-center">
    <button class="btn btn-success" (click)="exportData()">Exportar Excel</button>
  </div>
</div>